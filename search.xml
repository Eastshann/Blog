<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>设置samba共享目录</title>
      <link href="/2025/04/14/%E8%AE%BE%E7%BD%AEsamba%E5%85%B1%E4%BA%AB%E7%9B%AE%E5%BD%95/"/>
      <url>/2025/04/14/%E8%AE%BE%E7%BD%AEsamba%E5%85%B1%E4%BA%AB%E7%9B%AE%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h3 id="1-检查Samba服务状态"><a href="#1-检查Samba服务状态" class="headerlink" title="1.检查Samba服务状态"></a>1.检查Samba服务状态</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl status smbd</span><br><span class="line"><span class="built_in">sudo</span> systemctl status nmbd</span><br></pre></td></tr></table></figure><p><strong>输出示例（服务已启动）：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">● smbd.service - Samba SMB/CIFS server</span><br><span class="line">   Loaded: loaded (/lib/systemd/system/smbd.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (running) since Fri 2025-01-10 10:00:00 UTC; 5min ago</span><br></pre></td></tr></table></figure><p><strong>输出示例（服务未启动）</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">● smbd.service - Samba SMB/CIFS server</span><br><span class="line">   Loaded: loaded (/lib/systemd/system/smbd.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: inactive (dead)</span><br></pre></td></tr></table></figure><p><strong>如果Samba服务未启动，可以使用以下命令启动或重启：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl start smbd</span><br><span class="line"><span class="built_in">sudo</span> systemctl start nmbd</span><br></pre></td></tr></table></figure><p><strong>重启服务（确保加载最新配置）：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl restart smbd</span><br><span class="line"><span class="built_in">sudo</span> systemctl restart nmbd</span><br></pre></td></tr></table></figure><h3 id="2-查看SMB用户"><a href="#2-查看SMB用户" class="headerlink" title="2. 查看SMB用户"></a>2. 查看SMB用户</h3><p><strong>使用<code>smbpasswd</code>查看本地SMB用户</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pdbedit -L</span><br></pre></td></tr></table></figure><p>​输出示例</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root:0:root</span><br></pre></td></tr></table></figure><p><strong>添加SMB用户(必须先是系统用户):</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> smbpasswd -a username</span><br></pre></td></tr></table></figure><p><strong>启用用户：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> smbpasswd -e username</span><br></pre></td></tr></table></figure><p><strong>删除SMB用户：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> smbpasswd -x username</span><br></pre></td></tr></table></figure><h3 id="3-编辑-Samba-配置文件-etc-samba-smb-conf："><a href="#3-编辑-Samba-配置文件-etc-samba-smb-conf：" class="headerlink" title="3.编辑 Samba 配置文件 /etc/samba/smb.conf："></a>3.编辑 Samba 配置文件 <code>/etc/samba/smb.conf</code>：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/samba/smb.conf</span><br></pre></td></tr></table></figure><p><strong>在文件末尾添加共享配置：</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[共享目录别名]</span></span><br><span class="line"><span class="attr">path</span> = 实际目录绝对路径</span><br><span class="line"><span class="attr">browseable</span> = <span class="literal">yes</span></span><br><span class="line"><span class="attr">writable</span> = <span class="literal">yes</span></span><br><span class="line">guest <span class="attr">ok</span> = <span class="literal">yes</span></span><br><span class="line">create <span class="attr">mask</span> = <span class="number">0777</span></span><br><span class="line">directory <span class="attr">mask</span> = <span class="number">0777</span></span><br></pre></td></tr></table></figure><p><strong>配置解释：</strong></p><ul><li><code>path</code>：共享目录路径。</li><li><code>browseable</code>：是否可在网络浏览器中看到该共享。</li><li><code>writable</code>：是否允许写入。</li><li><code>guest ok</code>：是否允许匿名用户访问（无用户名密码）。</li><li><code>create mask</code> 和 <code>directory mask</code>：文件和目录的权限掩码。</li></ul><p><strong>如果你希望限制访问，可以在配置中加入：</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">valid <span class="attr">users</span> = SMB用户名</span><br></pre></td></tr></table></figure><p> <strong>重启Samba服务</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart smbd</span><br><span class="line">sudo systemctl restart nmbd</span><br></pre></td></tr></table></figure><h3 id="4-挂载测试"><a href="#4-挂载测试" class="headerlink" title="4.挂载测试"></a>4.挂载测试</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -t cifs //IP地址/共享目录别名 挂载地址 -o vers=3.0,username=SMB账户,password=密码</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -t cifs //10.65.233.37/vrs_jobs_test /home/workspace/projects/aoi_project/data/vrs_jobs_test -o vers=3.0,username=root,password=Baidu@123</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> samba </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>腾讯云OpenCloudOS系统下安装ngnix报错</title>
      <link href="/2025/04/14/%E8%85%BE%E8%AE%AF%E4%BA%91OpenCloudOS%E7%B3%BB%E7%BB%9F%E4%B8%8B%E5%AE%89%E8%A3%85ngnix%E6%8A%A5%E9%94%99/"/>
      <url>/2025/04/14/%E8%85%BE%E8%AE%AF%E4%BA%91OpenCloudOS%E7%B3%BB%E7%BB%9F%E4%B8%8B%E5%AE%89%E8%A3%85ngnix%E6%8A%A5%E9%94%99/</url>
      
        <content type="html"><![CDATA[<p><strong>问题描述：</strong></p><p>腾讯云OpenCloudOS 9系统下使用yum安装ngnix时报错</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@VM-4-7-opencloudos /]# yum install nginx -y</span><br><span class="line">Last metadata expiration check: 0:00:41 ago on Mon 14 Apr 2025 01:01:27 AM CST.</span><br><span class="line">Error: </span><br><span class="line"> Problem: cannot install the best candidate <span class="keyword">for</span> the job</span><br><span class="line">  - nothing provides libcrypt.so.2()(64bit) needed by nginx-2:1.26.3-1.el9.ngx.x86_64 from nginx-stable</span><br><span class="line">  - nothing provides libcrypt.so.2(XCRYPT_2.0)(64bit) needed by nginx-2:1.26.3-1.el9.ngx.x86_64 from nginx-stable</span><br><span class="line">(try to add <span class="string">&#x27;--skip-broken&#x27;</span> to skip uninstallable packages or <span class="string">&#x27;--nobest&#x27;</span> to use not only best candidate packages)</span><br></pre></td></tr></table></figure><p><strong>解决方法：</strong></p><p>用 <code>--nobest</code> 选项尝试安装不那么新的 nginx</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> yum install nginx --nobest -y</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Installed:</span><br><span class="line">  nginx-1.26.2-2.oc9.ap.2.x86_64 nginx-core-1.26.2-2.oc9.ap.2.x86_64 nginx-filesystem-1.26.2-2.oc9.ap.2.noarch system-logos-httpd-1.0.4-1.oc9.noarch</span><br><span class="line">Skipped:</span><br><span class="line">  nginx-2:1.26.3-1.el9.ngx.x86_64</span><br></pre></td></tr></table></figure><p>这个选项会跳过“最佳匹配”版本，可能会选一个不依赖 <code>libcrypt.so.2</code> 的旧版 nginx。</p><table><thead><tr><th>包名版本</th><th>提供方</th><th>说明</th></tr></thead><tbody><tr><td><code>nginx-1.26.2-2.oc9.ap.2</code></td><td>OpenCloudOS 社区</td><td>为 oc9 系统构建，兼容性更好</td></tr><tr><td><code>nginx-1.26.3-1.el9.ngx</code></td><td>NGINX 官方</td><td>最新稳定版，但可能依赖更新的系统库（比如 <code>libcrypt.so.2</code>）</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ngnix </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LaTex公式</title>
      <link href="/2024/07/31/LaTex%E5%85%AC%E5%BC%8F/"/>
      <url>/2024/07/31/LaTex%E5%85%AC%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p><img src="/../images/LaTex/l1.png"></p><p><img src="/../images/LaTex/l2.png"></p><p><img src="/../images/LaTex/l3.png"></p><p><img src="/../images/LaTex/l4.png"></p>]]></content>
      
      
      
        <tags>
            
            <tag> 写作 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>charles抓包</title>
      <link href="/2024/07/02/charles%E6%8A%93%E5%8C%85/"/>
      <url>/2024/07/02/charles%E6%8A%93%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<h1 id="Charles抓包"><a href="#Charles抓包" class="headerlink" title="Charles抓包"></a>Charles抓包</h1><p>安装证书</p><p><img src="/../images/charles%E6%8A%93%E5%8C%85/image-20240702094854598.png" alt="image-20240702094854598"></p><p><img src="/../images/charles%E6%8A%93%E5%8C%85/image-20240702094923499.png" alt="image-20240702094923499"></p><p><img src="/../images/charles%E6%8A%93%E5%8C%85/image-20240702094940836.png" alt="image-20240702094940836"></p><p><img src="/../images/charles%E6%8A%93%E5%8C%85/image-20240702095002286.png" alt="image-20240702095002286"></p><p>代理设置</p><p><img src="/../images/charles%E6%8A%93%E5%8C%85/image-20240702095152736.png" alt="image-20240702095152736"></p><p><img src="/../images/charles%E6%8A%93%E5%8C%85/image-20240702095225274.png" alt="image-20240702095225274"></p>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git版本控制</title>
      <link href="/2024/07/01/Git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"/>
      <url>/2024/07/01/Git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h1><h2 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h2><p>方式一</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br></pre></td></tr></table></figure><p>方式二</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone</span><br></pre></td></tr></table></figure><h2 id="数据管理和文件状态"><a href="#数据管理和文件状态" class="headerlink" title="数据管理和文件状态"></a>数据管理和文件状态</h2><p>git本地数据管理分三个区域：<strong>工作区</strong>、<strong>暂存区</strong>和<strong>本地仓库</strong></p><p><strong>工作区</strong>：资源管理器里的文件夹</p><p><strong>暂存区</strong>：临时区域，用于保存即将提交到git仓库的修改内容</p><p><strong>本地仓库</strong>：用<strong>git init</strong>创建的仓库，存储代码和版本信息的主要位置</p><p><img src="/../images/git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/image-20240701094928777.png" alt="image-20240701094928777"></p><p>git中文件有四种状态：<strong>未跟踪</strong>、<strong>未修改</strong>、<strong>已修改</strong>、<strong>已暂存</strong></p><p><img src="/../images/git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/image-20240701095501351.png" alt="image-20240701095501351"></p><h2 id="添加和提交文件"><a href="#添加和提交文件" class="headerlink" title="添加和提交文件"></a>添加和提交文件</h2><p>检查当前文件状态</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Your branch is up-to-<span class="built_in">date</span> with &#x27;origin/master&#x27;.</span><br><span class="line">nothing to commit, working directory clean</span><br></pre></td></tr></table></figure><p>添加到暂存区</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add README</span><br></pre></td></tr></table></figure><p>取消添加暂存</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rm --cached &lt;file&gt;...</span><br></pre></td></tr></table></figure><p>提交跟新</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit</span><br></pre></td></tr></table></figure><p>查看提交记录</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br></pre></td></tr></table></figure><h2 id="git-reset回退版本"><a href="#git-reset回退版本" class="headerlink" title="git reset回退版本"></a>git reset回退版本</h2><p>reset的三种模式：soft、hard、mixed</p><p><img src="/../images/git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/image-20240701102123441.png" alt="image-20240701102123441"></p><p>回溯之前的操作:</p><p>reflog查看之前的操作，找到版本号</p><p>reset到版本位置</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git reflog </span><br><span class="line">$ git reset b270efb</span><br></pre></td></tr></table></figure><h2 id="git-diff-查看差异"><a href="#git-diff-查看差异" class="headerlink" title="git diff 查看差异"></a>git diff 查看差异</h2><p><strong>git diff</strong>默认比较工作区和暂存区差异</p><p><strong>git diff HEAD</strong>比较工作区和版本库之间的差异</p><p><strong>git diff –cache</strong>比较暂存区和版本库之间的差异</p><p>**git diff &lt;版本一&gt; &lt;版本二&gt;**比较两个版本之间的差异</p><p><strong>git diff &lt;版本ID&gt; HEAD</strong>比较版本ID和分支最新提交节点的差异</p><p><strong>git diff HEAD~ HEAD</strong>比较上个版本和当前版本的差异（~可以替换为^）</p><p><strong>git diff HEAD~2 HEAD</strong>比较提交之前的第二个版本和当前版本的差异</p><p><strong>git diff HEAD~2 HEAD file3.txt</strong>比较提交之前的第二个版本和当前版本<strong>flie3.txt</strong>的差异</p><p><img src="/./../images/git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/dff26111c327b5005333b65bbfb5c65f.png" alt="dff26111c327b5005333b65bbfb5c65f"></p><h2 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h2><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rm &lt;filename&gt;</span><br></pre></td></tr></table></figure><p><img src="/../images/git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/image-20240701111902355.png" alt="image-20240701111902355"></p><h2 id="gitignore忽略文件"><a href="#gitignore忽略文件" class="headerlink" title=".gitignore忽略文件"></a>.gitignore忽略文件</h2><p>应该忽略哪些文件？</p><ol><li>系统或者软件自动生成的文件</li><li>编译产生的中间文件和结果文件</li><li>运行时生成日志文件、缓存文件、临时文件</li><li>涉及身份、密码、口令、秘钥等敏感信息文件</li></ol><p>忽略文件夹用&#x2F;结尾，如temp&#x2F;</p><h2 id="SSH配置和克隆仓库"><a href="#SSH配置和克隆仓库" class="headerlink" title="SSH配置和克隆仓库"></a>SSH配置和克隆仓库</h2><p>生成SSH key：ssh-keygen -t rsa -b 4096</p><p>克隆仓库：git clone</p><p>推送跟新内容：git push <remote> <branch></p><p>拉取跟新内容：git pull <remote></p><h2 id="关联本地仓库和远程仓库"><a href="#关联本地仓库和远程仓库" class="headerlink" title="关联本地仓库和远程仓库"></a>关联本地仓库和远程仓库</h2><p>添加远程仓库</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add &lt;远程仓库别名&gt; &lt;远程仓库地址&gt;</span><br><span class="line">$ git push -u &lt;远程仓库名&gt; &lt;分支名&gt;</span><br></pre></td></tr></table></figure><p>查看远程仓库</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote -v</span><br></pre></td></tr></table></figure><p>拉取远程仓库内容</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git pull &lt;远程仓库名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;</span><br></pre></td></tr></table></figure><h2 id="分支简介和基本操作"><a href="#分支简介和基本操作" class="headerlink" title="分支简介和基本操作"></a>分支简介和基本操作</h2><p>查看当前仓库所有分支</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch</span><br></pre></td></tr></table></figure><p>创建分支</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch &lt;分支名&gt;</span><br></pre></td></tr></table></figure><p>切换分支</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout &lt;分支名&gt;</span><br><span class="line">$ git switch &lt;分支名&gt;</span><br></pre></td></tr></table></figure><p>合并分支 </p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git merge &lt;将要合并的分支&gt;</span><br></pre></td></tr></table></figure><p>删除分支</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d &lt;已合并的分支&gt;</span><br><span class="line">$ git branch -D &lt;未合并的分支&gt;</span><br></pre></td></tr></table></figure><p>终止合并</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git merge --abort</span><br></pre></td></tr></table></figure><h2 id="回退和rebase"><a href="#回退和rebase" class="headerlink" title="回退和rebase"></a>回退和rebase</h2><p>恢复删除的分支</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b &lt;分支名&gt; &lt;分支id&gt;</span><br></pre></td></tr></table></figure><p>rebase改基</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git switch dev</span><br><span class="line">$ git rebase main</span><br></pre></td></tr></table></figure><p><img src="/../images/git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/image-20240701155504897.png" alt="image-20240701155504897"></p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git switch mian</span><br><span class="line">$ git rebase dec</span><br></pre></td></tr></table></figure><p><img src="/../images/git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/image-20240701155620386.png" alt="image-20240701155620386"></p><p><strong>merge</strong></p><p>优点:不会破坏原分支的提交历史，方便回溯和查看</p><p>缺点:会产生额外的提交节点，分支图比较复杂</p><p><strong>rebase</strong></p><p>优点:不会新增额外的提交记录，形成线性历史，比较直观和干净</p><p>缺点::会改变提交历史，改变了当前分支branch out的节点，避免在共享分支使用</p><h2 id="分支管理和工作流模型"><a href="#分支管理和工作流模型" class="headerlink" title="分支管理和工作流模型"></a>分支管理和工作流模型</h2><p>GitFlow 是一种流程模型，用于在Git上管理软件开发项目。</p><p>**主分支(master&#x2F;main)：**代表了项目的稳定版本，每个提交到主分支的代码都应该是经过测试和审核的。</p><p>**开发分支(develop)：**用于日常开发。所有的功能分支、发布分支和修补分支都应该从开发分支派生出来。</p><p>**功能分支(feature)：**用于开发单独的功能或者特性。每个功能分支都应该从开发分支派生，并在开发完成后合并回开发分支。</p><p>**发布分支(release)：**用于准备项目发布。发布分支应该从开发分支派生，并在准备好发布版本后合并回主分支和开发分支。</p><p>**热修复分支(hotfix)：**用于修复主分支上的紧急问题。热修复分支应该从主分支派生，并在修复完成后，合并回主分支和开发分支。</p><p><img src="/../images/git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/image-20240701161341132.png" alt="image-20240701161341132"></p><h2 id="git指令一览表"><a href="#git指令一览表" class="headerlink" title="git指令一览表"></a>git指令一览表</h2><p><img src="/../images/git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/Git-Cheet-Sheet-ByGeekHour.png" alt="Git-Cheet-Sheet-ByGeekHour"></p>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>陈</title>
      <link href="/2024/06/20/%E9%99%88/"/>
      <url>/2024/06/20/%E9%99%88/</url>
      
        <content type="html"><![CDATA[<h1 id="龙门——陈"><a href="#龙门——陈" class="headerlink" title="龙门——陈"></a>龙门——陈</h1><p><img src="/../images/%E9%99%88/%E7%AB%8B%E7%BB%98_%E9%99%88_1.png" alt="立绘_陈_1"></p><p>龙门近卫局警司，特别督察组组长。</p><p>负责龙门近卫局特别督察组的日常指挥执行工作。</p><p>魏彦吾的最得力的下属之一。拥有整个近卫局中最精湛的剑技以及最严苛的态度。态度极度强硬，对人一视同仁。看起来一点都不变通，总是一副凶着脸的样子。</p><h3 id="武器"><a href="#武器" class="headerlink" title="武器"></a>武器</h3><p>陈警司的爱剑名为“赤霄”，这并不是一个秘密。但鲜少有人知道，赤霄有七式——拔刀、泪锋、奔夜、扬眉、绝影、云裂、天瞠（cheng)</p><p>至于陈警司是不愿使用还是不能使用，恐怕就只有她本人知晓了</p><h3 id="陈证章"><a href="#陈证章" class="headerlink" title="陈证章"></a>陈证章</h3><p><img src="/../images/%E9%99%88/%E6%A8%A1%E7%BB%84_%E8%AF%81%E7%AB%A0.png" alt="模组_证章"></p><p>干员陈擅长于近身搏斗中对敌人造成多段杀伤</p><p>根据外勤部门决议</p><p>在外勤任务中划分为近卫干员，行使剑豪职责</p><p>特别颁发此证章</p><p>以兹证明</p><h3 id="招聘合同"><a href="#招聘合同" class="headerlink" title="招聘合同"></a>招聘合同</h3><p>龙门近卫局特别督察组组长陈，正依合约前来协助罗德岛的任务。</p><p>生气的时候很可怕，平常也最好别惹她。</p><h3 id="信物"><a href="#信物" class="headerlink" title="信物"></a>信物</h3><p>在漫长时光中尘封许久的物件。</p><p>她并非是将之忘记，而仅仅是不忍再次抚摸它锈蚀的棱角</p><p>兴许在某一天，它会重新焕发出过往的炽热吧。</p><h3 id="罗德岛制式剑"><a href="#罗德岛制式剑" class="headerlink" title="罗德岛制式剑"></a>罗德岛制式剑</h3><p><img src="/../images/%E9%99%88/%E6%A8%A1%E7%BB%84_%E7%BD%97%E5%BE%B7%E5%B2%9B%E5%88%B6%E5%BC%8F%E5%89%91.png" alt="模组_罗德岛制式剑"></p><p><strong>基础信息</strong></p><p>七月七，晴。生辰，她激动地想要为魏彦吾展示拔刀，却找不到魏彦吾的踪影。等了三天，没有等到。</p><p>五月十三，多云。以泪锋斩断了庭中的三十年老树，砸坏了屋顶。魏彦吾没有出现，只是差人植了一棵新的。她不再期待魏彦吾的认可。</p><p>一月一，大雨。贺年，倾盆大雨，去贫民区的途中路见不平，愤而出手，以一敌十五。生死攸关之际，以随身佩剑递出奔夜，伤七人，退八人。闹到了上面，魏彦吾难得出现，看了剑痕后，只看她一眼就走了。她忘了自己当时为何出手，却永远不会忘记那一眼中的失望。</p><p>十二月二十五，晴。从近卫学院返乡路上见义勇为，浑然无惧，扬眉之剑，当放则放。她意气风发，以为自己可以荡平天下不平事。</p><p>七月三十，多云。以昏迷五天为代价，递出绝影，最终斩了重大通缉犯，龙门陈晖洁，崭露头角。醒来之后，赤霄放在她的床头，魏彦吾没有来看过她。</p><p>八月十三，阴。追捕感染者罪犯途中，欲以赤霄出手，赤霄纹丝未动。而后，生死攸关之际，福至心灵，赤霄拔刀，斩塌了半个地下车库。她去找魏彦吾想知道赤霄究竟为何，魏彦吾没有见她。</p><p>九月三十，晴。赤霄二度出鞘，斩开一扇金库大门，救出其中人质。她开始理解，赤霄乃意志之剑。她以为她一直以来做得够多，其实是她做得太少。她必须更快，她必须更有力。</p><p>七月七，多云。生辰，十几年来，魏彦吾第一次提出要看一看她的剑，她凝聚一路所学，以未完成的云裂作为答卷，魏彦吾不置可否。</p><p>一月十一，晴。与罗德岛一同离开龙门。之后一路，赤霄鲜少出鞘。</p><h3 id="往昔时光"><a href="#往昔时光" class="headerlink" title="往昔时光"></a><strong>往昔时光</strong></h3><p><img src="/../images/%E9%99%88/%E6%A8%A1%E7%BB%84_%E5%BE%80%E6%98%94%E6%97%B6%E5%85%89.png" alt="模组_往昔时光"></p><p>大地的伤痕自天际线奔袭而来，精准地击中一片维多利亚式建筑群，楼宇如同遭遇旋风袭击的树林，围绕着同一个点以放射状倒塌。在这片帝国的废墟之中，两个身影正翻过一座倒下的石碑，试图寻找高点。</p><p>“这里荒废多久了？”陈站在废墟上远眺，身后的石碑上那些曾经象征着荣誉的名字都被涂抹殆尽。</p><p>“这片校舍自从战争爆发那会儿就弃用了，还没完成学业的学弟学妹们被分流到了新的校区，完成了剩下的课程……陈陈，前面是我们以前的老训练场，你还记得吗？”风笛的声音从低处传来。</p><p>“我记得特别清楚，感觉自己当学生的时候总是错过一些好事。一到毕业路也修好了，训练场也修好了。”</p><p>训练场被冲击波挤成了一片片翘起的地块，陈捡起了一块石头，丢进地块夹缝中冒出的灌木丛，躲在其中的羽兽尖叫着扑腾向远处。</p><p>“那时候已经足够好啦。”风笛的声音自远而近，停留在了陈的耳畔。</p><p>“也是。那可能是我最单纯的一段时间了，不用去思考一些麻烦的问题，只需要专心训练和学习。”</p><p>“这就是当时的你每天疯狂训练，全常规科目拿A的动力？”风笛将双手搭在陈的肩上，轻轻地摇晃着。</p><p>“回去以后，我发现有太多的事无法用刀剑解决，有些时候会觉得自己过于渺小，即便努力工作，也无法改变很多事——消灭敌人有的时候并不能解决问题。”陈摇了摇头，好像要把过去的庞杂思绪都从脑海中丢出去。</p><p>两人走下高坡，记忆中的花圃还在原地。</p><p>曾经高悬的近卫学校标志一半深深插入泥土，一半斜靠在断裂的石柱上。夕阳西下，阳光倾泻在已有斑驳锈迹的标志上，仅剩的金属光泽诉说着这里曾经的荣光。</p><p>“一切都变了，维多利亚不也一样吗？”陈盯着校徽，喃喃自语道。</p><p>“还是有人没有变的。知道你要来，我前几天特意去拜访了泰勒教官。当时你走得太匆忙，留在宿舍里的文件啥的都没带走——她这些年一直保管着你这些东西。</p><p>这是你的学业通过证明。哦对了，还有这个！”</p><p>风笛从随身的包里掏出了一叠证件，还有一把木剑。</p><p>“这是你当年的训练用剑，按道理是要收回的，但是你的成绩太好了，教官本来打算给你个惊喜，想把这把剑送给你……”</p><p>“代我向她表示感谢。那会儿我走得太快了……”</p><p>“至少你现在回来了。这些年，我们很多同学再也没有回来。”</p><p>两人沉默了一会儿。</p><p>“十年后，你觉得你会在哪？”</p><p>“谁知道呢，应该要回去吧，还有很多事要做。”陈向远方看去，那正是龙门的方向，“那时无论来这上学还是离开，都是他们安排好的。现在，我要自己走回去了。”</p>]]></content>
      
      
      <categories>
          
          <category> 明日方舟 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>虚拟机静态ip配置</title>
      <link href="/2024/06/04/%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9D%99%E6%80%81ip%E9%85%8D%E7%BD%AE/"/>
      <url>/2024/06/04/%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9D%99%E6%80%81ip%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h3 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h3><p>打开虚拟机，点击导航栏上面的 编辑–&gt;虚拟网络编辑器</p><p><img src="/../images%5C%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9D%99%E6%80%81ip%E9%85%8D%E7%BD%AE%5Cimage-20240612162725907.png" alt="image-20240612162725907"></p><h3 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h3><p>选中上面的VMnet8，在到下面的子网 ip 处编辑ip地址，可以改成192.168.8.0，点击右边的 NAT设置</p><p><img src="/../images%5C%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9D%99%E6%80%81ip%E9%85%8D%E7%BD%AE%5Cimage-20240612162736166.png" alt="image-20240612162736166"></p><h3 id="第三步"><a href="#第三步" class="headerlink" title="第三步"></a>第三步</h3><p>在NAT中设置网关 i p，可以改成 192.168.8.2，点击确定就可以了，</p><p>配置【网关ip】，注意【网关ip】需要在【子网ip】段下，这里设置为192.168.8.2，请不要设置为192.168.8.1，否则会出错。</p><p><img src="/../images%5C%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9D%99%E6%80%81ip%E9%85%8D%E7%BD%AE%5Cimage-20240612162742888.png" alt="image-20240612162742888"></p><h3 id="第四步"><a href="#第四步" class="headerlink" title="第四步"></a>第四步</h3><p>在电脑的任务栏中选中网络那里右键打开 网络和共享中心</p><p><img src="/../images%5C%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9D%99%E6%80%81ip%E9%85%8D%E7%BD%AE%5Cimage-20240612162749719.png" alt="image-20240612162749719"></p><p>在左边点击 <em>更改适配器设置</em>，然后右键选属性打开 <em>VMare Network Adapter VMnet8</em>,</p><p><img src="/../images%5C%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9D%99%E6%80%81ip%E9%85%8D%E7%BD%AE%5Cimage-20240612162753888.png" alt="image-20240612162753888"></p><p>在打开的页面上选 Internet协议版本4</p><p><img src="/../images%5C%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9D%99%E6%80%81ip%E9%85%8D%E7%BD%AE%5Cimage-20240612162800828.png" alt="image-20240612162800828"></p><p>点击属性，在打开的页面选择 使用下面的ip地址 </p><p>ip地址可以填192.168.8.1，默认网关必须与前面的第三步配好的网关ip一致也就是 192.168.8.2，就此虚拟机的固定ip地址就配完了</p><p><img src="/../images%5C%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9D%99%E6%80%81ip%E9%85%8D%E7%BD%AE%5Cimage-20240612162805670.png" alt="image-20240612162805670"></p><h3 id="第五步"><a href="#第五步" class="headerlink" title="第五步"></a>第五步</h3><p>到linux操作系统中输入命令 vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33</p><blockquote><p>TYPE&#x3D;Ethernet<br>PROXY_METHOD&#x3D;none<br>BROWSER_ONLY&#x3D;no<br>BOOTPROTO&#x3D;static #dhcp修改为static<br>DEFROUTE&#x3D;yes<br>IPV4_FAILURE_FATAL&#x3D;no<br>IPV6INIT&#x3D;yes<br>IPV6_AUTOCONF&#x3D;yes<br>IPV6_DEFROUTE&#x3D;yes<br>IPV6_FAILURE_FATAL&#x3D;no<br>IPV6_ADDR_GEN_MODE&#x3D;stable-privacy<br>NAME&#x3D;ens33<br>#HWADDR&#x3D;00:0C:39:82:D2:E1 #mac地址<br>UUID&#x3D;e9fc8134-2e3f-480c-99db-012d118df87b<br>DEVICE&#x3D;ens33<br>ONBOOT&#x3D;yes<br>IPADDR&#x3D;192.168.8.101 #静态IP，跟192.168.8的网段相同，但不能与192.168.8.1一样会冲突<br>NETMASK&#x3D;255.255.255.0 #子网 掩码<br>GATEWAY&#x3D;192.168.8.2 #网关<br>DNS1&#x3D;192.168.8.2 #DNS配置与网关一致</p></blockquote><p>改好后保存退出，重启网卡：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart network</span><br></pre></td></tr></table></figure><p>ifconfig 回车查看ip地址：</p><p><img src="/../images%5C%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9D%99%E6%80%81ip%E9%85%8D%E7%BD%AE%5Cimage-20240612162809701.png" alt="image-20240612162809701"></p><p>可以输入ping <a href="http://www.baidu.com看看是否能ping通百度,下面个的图片已经可以ping通百度了,这时候按ctrl+z键可以停止/">www.baidu.com看看是否能ping通百度，下面个的图片已经可以ping通百度了，这时候按ctrl+Z键可以停止</a></p><p><img src="/../images%5C%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9D%99%E6%80%81ip%E9%85%8D%E7%BD%AE%5Cimage-20240612162812495.png" alt="image-20240612162812495"></p>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>K8S虚拟机集群配置</title>
      <link href="/2024/05/31/K8S%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE/"/>
      <url>/2024/05/31/K8S%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h3 id="一、基本环境准备工作"><a href="#一、基本环境准备工作" class="headerlink" title="一、基本环境准备工作"></a>一、基本环境准备工作</h3><p><strong>设置hostname</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostnamectl set-hostname master</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostnamectl set-hostname node1 </span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostnamectl set-hostname node2</span><br></pre></td></tr></table></figure><p><strong>关闭防火墙</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br></pre></td></tr></table></figure><p><strong>查看ip</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr</span><br></pre></td></tr></table></figure><p>master：192.168.19.101</p><p>node1： 192.168.19.102</p><p>node2： 192.168.19.103</p><p><strong>设置host和ip绑定</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hosts</span><br></pre></td></tr></table></figure><p><strong>三个节点相互可以ping通</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ping master</span><br><span class="line">ping node1</span><br><span class="line">ping node2</span><br></pre></td></tr></table></figure><p><strong>系统初始化</strong></p><p><strong>关闭selinux</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s/enforcing/disabled/&#x27;</span> /etc/selinux/config <span class="comment"># 永久</span></span><br><span class="line">setenforce 0 <span class="comment"># 临时</span></span><br></pre></td></tr></table></figure><p><strong>关闭 swap</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">swapoff -a <span class="comment"># 临时</span></span><br><span class="line">vim /etc/fstab <span class="comment"># 永久</span></span><br></pre></td></tr></table></figure><p><strong>将桥接的 IPv4 流量传递到 iptables 的链</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置</span></span><br><span class="line"><span class="built_in">cat</span> &gt;&gt; /etc/sysctl.d/k8s.conf &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">net.bridge.bridge-nf-call-ip6tables = 1</span></span><br><span class="line"><span class="string">net.bridge.bridge-nf-call-iptables = 1</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="comment"># 生效</span></span><br><span class="line">sysctl --system</span><br></pre></td></tr></table></figure><p><strong>时间同步</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install ntpdate -y</span><br><span class="line">ntpdate time.windows.com</span><br></pre></td></tr></table></figure><h3 id="二、所有节点安装-Docker-kubeadm-kubelet"><a href="#二、所有节点安装-Docker-kubeadm-kubelet" class="headerlink" title="二、所有节点安装 Docker&#x2F;kubeadm&#x2F;kubelet"></a>二、所有节点安装 Docker&#x2F;kubeadm&#x2F;kubelet</h3><p>Kubernetes 默认 CRI（容器运行时）为 Docker，因此先安装 Docker。</p><h4 id="（1）安装-Docker"><a href="#（1）安装-Docker" class="headerlink" title="（1）安装 Docker"></a>（1）安装 Docker</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo -O /etc/yum.repos.d/docker-ce.repo</span><br><span class="line">yum -y install docker-ce-18.06.1.ce-3.el7</span><br><span class="line">systemctl <span class="built_in">enable</span> docker &amp;&amp; systemctl start docker</span><br><span class="line">docker --version</span><br></pre></td></tr></table></figure><h4 id="（2）添加阿里云-YUM-软件源"><a href="#（2）添加阿里云-YUM-软件源" class="headerlink" title="（2）添加阿里云 YUM 软件源"></a>（2）添加阿里云 YUM 软件源</h4><p>设置仓库地址</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &gt; /etc/docker/daemon.json &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">&quot;registry-mirrors&quot;: [&quot;https://b9pmyelo.mirror.aliyuncs.com&quot;]</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><p>添加 yum 源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &gt; /etc/yum.repos.d/kubernetes.repo &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">[kubernetes]</span></span><br><span class="line"><span class="string">name=Kubernetes</span></span><br><span class="line"><span class="string">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64</span></span><br><span class="line"><span class="string">enabled=1</span></span><br><span class="line"><span class="string">gpgcheck=0</span></span><br><span class="line"><span class="string">repo_gpgcheck=0</span></span><br><span class="line"><span class="string">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg</span></span><br><span class="line"><span class="string">https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><h4 id="（3）安装-kubeadm，kubelet-和-kubectl"><a href="#（3）安装-kubeadm，kubelet-和-kubectl" class="headerlink" title="（3）安装 kubeadm，kubelet 和 kubectl"></a>（3）安装 kubeadm，kubelet 和 kubectl</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install -y kubelet kubeadm kubectl</span><br><span class="line">systemctl <span class="built_in">enable</span> kubelet</span><br></pre></td></tr></table></figure><h3 id="三、部署-Kubernetes-Master"><a href="#三、部署-Kubernetes-Master" class="headerlink" title="三、部署 Kubernetes Master"></a>三、部署 Kubernetes Master</h3><p>在 192.168.19.101（Master）执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubeadm init --apiserver-advertise-address=192.168.19.101 --image-repository registry.aliyuncs.com/google_containers --kubernetes-version v1.23.6 --service-cidr=10.96.0.0/12 --pod-network-cidr=10.244.0.0/16</span><br></pre></td></tr></table></figure><p><img src="/./images%5CK8S%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%5Cimage-20240612162900429.png" alt="image-20240612162900429"></p><p>安装成功后，复制如下配置并执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$HOME</span>/.kube</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chown</span> $(<span class="built_in">id</span> -u):$(<span class="built_in">id</span> -g) <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">kubectl get nodes</span><br></pre></td></tr></table></figure><p><img src="/./../images%5CK8S%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%5Cimage-20240612162909908.png" alt="image-20240612162909908"></p><h3 id="四、加入-Kubernets-Node"><a href="#四、加入-Kubernets-Node" class="headerlink" title="四、加入 Kubernets Node"></a>四、加入 Kubernets Node</h3><p>获取master节点的token</p><p>如果 token 已经过期，就重新申请</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubeadm token create</span><br></pre></td></tr></table></figure><p>token 没有过期可以通过如下命令获取</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubeadm token list</span><br></pre></td></tr></table></figure><p>获取 –discovery-token-ca-cert-hash 值，得到值后需要在前面拼接上 sha256:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -pubkey -<span class="keyword">in</span> /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2&gt;/dev/null | \</span><br><span class="line">openssl dgst -sha256 -hex | sed <span class="string">&#x27;s/^.* //&#x27;</span></span><br></pre></td></tr></table></figure><p>在node节点输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubeadm <span class="built_in">join</span> 192.168.19.101:6443 --token 01ypzs.0af41ttdb3o6ush9 --discovery-token-ca-cert-hash sha256:7b01f7fe1f03a38b845c506eccad67e30f781ac6cc7877e00af45f33b8b3cdf4</span><br></pre></td></tr></table></figure><p>查看nodes</p><p><img src="/../images%5CK8S%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%5Cimage-20240612162914428.png" alt="image-20240612162914428"></p><p>输入<strong>kubectl get componentstatus</strong>查看组件状态</p><p><img src="/../images%5CK8S%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%5Cimage-20240612162918366.png" alt="image-20240612162918366"></p><p>输入<strong>kubectl get pods</strong>查看pod</p><p><img src="/../images%5CK8S%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%5Cimage-20240612162921735.png" alt="image-20240612162921735"></p><p>输入<strong>kubectl get pods -n kube-system</strong>查看指定命名空间的pod</p><p><img src="/../images%5CK8S%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%5Cimage-20240612162924963.png" alt="image-20240612162924963"></p><p>最上面两个pod没用准备好是因为没有网络</p><h3 id="五、部署CNI网络插件"><a href="#五、部署CNI网络插件" class="headerlink" title="五、部署CNI网络插件"></a>五、部署CNI网络插件</h3><p>在&#x2F;opt下创建k8s文件夹</p><p>在&#x2F;opt&#x2F;k8s下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://calico-v3-25.netlify.app/archive/v3.25/manifests/calico.yaml -O</span><br></pre></td></tr></table></figure><p>修改 calico.yaml 文件中的 CALICO_IPV4POOL_CIDR 配置，修改为与初始化的 cidr 相同</p><p>修改calico.yaml 文件中的 镜像地址</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s#docker.io/##g&#x27;</span> calico.yaml</span><br></pre></td></tr></table></figure><p>构建应用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f calico.yaml</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> K8S </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
